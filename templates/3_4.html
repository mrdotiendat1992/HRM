{% extends  "base.html" %}
{% block style%}
<style>
    table, th, td , button{
        font-size: 10px;
    }
    .scroll-container {
        width: 100%;
        overflow-x: scroll;
    }
    .content {
        width: 2000px;
    }
    .pagination {
        font-size: 10px;
    }
    input {
        margin-left: 10px;
        font-size: 10px;
    }
</style>
{% endblock style %}
{% block content %}
<div class="scroll-container">
    <div class="content">
        <div style="display: flex;">
            <h5>Tổng: {{count}}</h5>
            <form method="POST" action="/export_dshhhd">
                
            </form>
        </div>
        <br>
        <table class="table table-hover">
            <thead>
                <tr class="table-primary">
                    <th>Mã số thẻ</th>
                    <th>Họ tên</th>
                    <th>Chức danh</th>
                    <th>Chuyền tổ</th>
                    <th>Phòng ban</th>
                    <th>Loại điểm danh</th>
                    <th>Ngày</th>                    
                    <th>Giờ</th>
                    <th>Lý do</th> 
                    <th>Trạng thái</th>
                </tr>
                <tr class="table-secondary">
                    <form action = "/muc7_1_4" method = "GET">
                        <th><input type="text" id="mst" name="mst" value="{{ request.args.get('mst', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="text" id="hoten" name="hoten" value="{{ request.args.get('hoten', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="text" id="chucvu" name="chucvu" value="{{ request.args.get('chucvu', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="text" id="chuyen" name="chuyen" value="{{ request.args.get('chuyen', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="text" id="bophan" name="bophan" value="{{ request.args.get('bophan', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="text" id="loaidiemdanh" name="loaidiemdanh" value="{{ request.args.get('loaidiemdanh', '') }}" onchange='this.form.submit()'></th>
                        <th><input type="date" id="ngay" name="ngay" value="{{ request.args.get('ngay', '') }}" onchange='this.form.submit()'></th></th>
                        <th></th>  
                        <th><input type="text" id="lydo" name="lydo" value="{{ request.args.get('lydo', '') }}" onchange='this.form.submit()'></th> 
                        <th><input type="text" id="trangthai" name="trangthai" value="{{ request.args.get('trangthai', '') }}" onchange='this.form.submit()'></th>
                    </form>
                </tr>
            </thead>
        
            <tbody>
                {% for row in danhsach %}
                <tr data-info='{{ row  | safe }}'>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                    <td>{{row[4]}}</td>
                    <td>{{row[5]}}</td>
                    <td>{{row[6]}}</td>
                    <td>{{row[7]}}</td>
                    <td>{{row[8][:5]}}</td>
                    <td>{{row[9]}}</td>
                    {% if row[10]=='Đã phê duyệt'%}
                    <td>{{row[10]}}</td>
                    {% elif row[10]=='Đã phê duyệt' %}
                    <td>{{row[10]}}</td>
                    {% else %}
                    <td>
                        <form action="/update_diemdanhbu" method="POST">
                            <input type="hidden" name="nhamay" value="{{current_user.macongty}}">
                            <input type="hidden" name="mst" value="{{row[1]}}">
                            <input type="hidden" name="bophan" value="{{row[5]}}">
                            <input type="hidden" name="mstduyet" value="{{current_user.mst}}">
                            <input type="hidden" name="ngayduyet" value="{{row[7]}}">
                            <input type="hidden" name="loaidiemdanh" value="{{row[6]}}">
                            <input type="submit" class="btn btn-warning" value="{{row[10]}}"></input>
                        </form>
                    </td>
                    {% endif %}
                </tr>  
                {% endfor %}
            </tbody>
        </table>
        {{pagination.links}}
    </div>
</div>
{% endblock content %}
