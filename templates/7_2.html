{% extends  "base.html" %}
{% block style%}
<style>
    table, th, td {
        font-size: 11px;
    }
    input, select {
        margin-left: 10px;
        width: 150px;
    }
</style>
{% endblock style %}
{% block content %}
<div class="container-fluid">
    <div class="container-fluid">
        <br>
        <form action="/muc7_2" method="GET">
            <div class="form-group">
                <label for="mst">Mã số thẻ</label>
                <input type="text" id="mst" name="mst" value={{request.args.get('mst', '')}}>
                <label for="phongban">Phòng ban</label>
                <select id="phongban" name="phongban">
                    <option value="">Tất cả</option>
                    {% for phongban in danhsachphongban %}
                        {% if phongban == request.args.get('phongban') %}
                            <option value="{{ phongban }}" selected>{{ phongban }}</option>
                        {% else %}
                            <option value="{{ phongban }}">{{ phongban }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <input type="date" id="tungay" name="tungay" value={{request.args.get('tungay', '')}}>
                <input type="date" id="denngay" name="denngay" value="{{request.args.get('denngay', '')}}">
                <input type="submit" class="btn btn-primary" value="Tìm kiếm"></input>
            </div>
        </form>
        <form action="/export_dscctt" method="POST">
            <input type="text" id="mst" name="mst" hidden value={{request.args.get('mst', '')}}>
            <input type="text" id="phongban" name="phongban" hidden value={{request.args.get('phongban', '')}}>
            <input type="date" id="tungay" name="tungay" hidden value={{request.args.get('tungay', '')}}>
            <input type="date" id="denngay" name="denngay" hidden value={{request.args.get('denngay', '')}}>
            <input type="submit" value="Xuất Excel" class="btn btn-success">
        </form>
        <br>
        <h5>Tổng: {{count}}</h5>
        <table class="table table-hover">
            <thead>
                <tr class="table-primary">
                    <th>#</th>
                    <th>Mã số thẻ</th>
                    <th>Họ tên</th>
                    <th>Chức danh</th>
                    <th>Chuyền tổ</th>
                    <th>Phòng ban</th>
                    <th>Ngày</th>                    
                    <th>Giờ vào</th>
                    <th>Giờ ra</th>
                    <th>Công HC</th>
                    <th>Nghỉ phép</th>
                    <th>Nghỉ tự do</th>
                    <th>Đi muộn</th>
                    <th>Giờ tăng ca 100%</th>   
                    <th>Giờ tăng ca 150%</th> 
                    <th>Ca</th>
                </tr>
            </thead>
          
            <tbody>
                {% for row in danhsach %}
                <tr data-info='{{ row  | safe }}'>
                    <td>{{ loop.index + (pagination.page - 1) * pagination.per_page }}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                    <td>{{row[4]}}</td>
                    <td>{{row[5]}}</td>
                    <td>{{row[6]}}</td>
                    <td>{{row[9]}}</td>
                    <td>{{row[10]}}</td>
                    <td>{{row[11]}}</td>
                    <td>{{row[12]}}</td>
                    <td></td>
                    <td></td>
                    <td>{{row[13]}}</td>
                    <td>{{row[14]}}</td>
                    <td>{{row[7]}}</td>
                </tr>  
                {% endfor %}
            </tbody>
        </table>
        <div class="pagination">{{ pagination.links }}</div>
        <script>
        
        </script>
    </div>
</div>
{% endblock content %}
